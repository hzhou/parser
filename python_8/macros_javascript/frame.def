fncode:: parse_javascript
    macros:
        pat_identifier: [a-zA-Z_\$]\w*

    #-- context ---------------
    subcode:: setup
        context_stack = []
        cur_context = {'type':"global", 'statements':[]}
        last_context= None

    subcode: start_context(type)
        cur_context = {type:"$(type)"}
        stack.append: ("$(type)", "boc")
        context_stack.append: cur_context

    subcode: restart_context(type)
        # e.g. if (cond_context) if_block context 
        cur_context = last_context
        stack.append: ("$(type)", "boc")
        context_stack.append: cur_context

    subcode: pop_context
        last_context= cur_context
        cur_context = context_stack.pop()

    #-- return -------------
    subcode: return
        return cur_context
